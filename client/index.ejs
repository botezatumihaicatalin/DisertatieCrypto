<!doctype html>
<html>
  <head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
    <title><%= htmlWebpackPlugin.options.title %></title>
    <style>
      #main_container {
        position: fixed;
        display: flex;
        background: white;
        flex-flow: row nowrap;
        width: 100%;
        height: 100%;
      }

      #content_container {
        flex: 1;
        display: flex;
        flex-flow: column nowrap;
        height: 100%;
      }

      #controls_container {
        background: white;
        height: 50px;
        width: 100%;
        border-bottom: solid 2px #dedede;
        display: flex;
        flex-flow: row nowrap;
        justify-content: flex-start;
        align-items: center;
        justify-content: center;
        flex: 0 0 auto;
      }

      #video_container {
        flex: 1;
        width: 100%;
      }

      #users_container {
        overflow: auto;
        padding: 20px;
        background: #f1f1f1;
        width: 200px;
        height: 100%;
        border-left: solid 2px #dedede;
        flex: 0 0 auto;
      }

      #users_container .active {
        background: red;
      }

    </style>
  </head>
  <body ng-app="main">
    <div id='main_container'>
      <div id='content_container' ng-controller="StreamController as streamController">
        <div id='controls_container'>
          <input type="file" id='video_picker'/>
          <button ng-click="streamController.toggleBroadcast()">
            {{ streamController.broadcasting ? 'End' : 'Begin' }} broadcast
          </button>
        </div>
        <div id='video_container'>
          <video controls width='100%' id='video_player'></video>
          <canvas width="640" height="480" id='stream_preview'></img>
        </div>
      </div>
      <div id='users_container' ng-controller="UsersController as usersController">
        <h4 class='title'> Active users </h4>
        <div ng-repeat="user in usersController.users"
             ng-attr-id="{{ user.id }}"
             ng-click="usersController.setSelected(user.id)"
             ng-class="{ 'active': usersController.isSelected(user.id) }">
          {{ user.name }}
        </div>
      </div>
    </div>
  </body>
</html>
